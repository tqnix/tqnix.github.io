<body>
Mi4wNTJ8fDE3MTA2NzY2MzEzMzU7MTcxMDY3NjYzMTMzNTsxNzMxODk4NTY5NzEyO+iAgeiAheWIh+aJiztqdXN3cDswLDEsMCwwLDAsMCwwfDExMTExMTAxMTEwMDAwMTAwMDAxMDExMTAwMXwyMjI0MjQ3MDk2MS4yOTkwMjY7MzQ3NTExNDIyMTI2OC4xNTU7NTIwNzQ7MTY7MTMxMjQxNDIxMzM0Ljc0MDU0OzEzMzswOzA7MDswOzA7MDswOzA7MDsxNjswOzA7MDswOzA7MDs7MDswOzA7MDswOzA7MDstMTstMTstMTstMTstMTswOzA7MDswOzc1OzA7MDsyOTs0NDg7MTczMTg5Nzk3NDI1OTsxNzMxODY5MzIxMTc4OzA7OzQxOzA7MDs5Nzc5MTI2MS40OTczNTg4Njs1MDswOzA7fDEwOSwyMDksMTU0NzEyNTIwNjMsMTAsLDAsMjAwOzEwMCwxMDIsMTA5MDUzOTA1OTcsMTAsLDAsMTAyOzEwMCwxMDAsMjMwMDE3NDc0MywxMCwxNzMxODk4NzU0MjU4OjA6MTczMTg2NzM2NDE3MTowOjA6MDowOjA6MTczMTg2NzM2NDE3MTogMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCAwOjA6MTQ6Njg6MDowOjA6MDoxNDozNjowOjA6MTQ6MDowOjA6MDowOjA6MDowOjA6MTQ6NTU6MTQ6NjM6MTQ6MDowOjA6MDowOjA6MDoxNDo0MDowOjA6MDowOjA6MDowOjA6MDowOjE0OjI4OjE0OjI1OjE0Ojg5OjA6MDoxNDo5NDowOjA6MTQ6OTg6MDowOjE0OjkyOjA6MDoxNDo5NDoxNDozODoxNDoxNTosMCwxMDA7MTAwLDEwMCw5MzQ4MTI2Mzk2LDEwLCwwLDEwMDsxMDAsMTAwLDE3MDQ5ODEwOTg4LDEwLCwwLDEwMDs2MCw2Miw2NjU1NDczNTE5OSwxMCwxOjA6MTotNjI1LjQ5NzkyNTM0MjkyNjI6MDogMjY4Njo1Oi05MDo0NTE6NDowOjA6MjA5MyEyNjQ2OjA6LTI2OjEzMDozOjA6MDo0MDYhNDM3MzoxOjEwOjM1MDo1OjA6MDozMjM1ITQyODA6NTo3MTo5OjU6MDowOjE3OCEzODUyOjU6MTI6MzU5OjQ6MDowOjQxNSE0OTU6MjotNjA6MzQ3OjE6MDowOjExNzEzITk2MTowOi0yOTo0NTk6MjowOjA6MTk3MiExOTc0OjI6LTExODozMzowOjE6MDowITYyMjoyOi04NzoyNzU6MDoxOjA6MCExMTI1MzoyOi03NToxOTY6MDoxOjA6MCEzNDQ4OjU6NTo0OTg6MDoxOjA6MCEzNjU2OjE6MjQ6NDMwOjA6MTowOjAhMTIzMTU6MTo3ODo1ODY6MDoxOjA6MCE2NjA1OjQ6LTgxOjQwMDowOjE6MDowITE0NzQ2OjU6LTI3OjQ2NzowOjE6MDowITU5MzI6MjotMTg2OjI4NzowOjE6MDowITE2ODA3OjU6LTI3OjM4NDowOjE6MDowITkxNjA6MjotMTQ5OjM1MjowOjE6MDowISAxLDAsNjA7NTAsNTAsMTYzNTQ0NDQ2NTU1LDEwLDUvNi84IDMgMTczMTg4Njg3NDMxMiAxLDAsNTA7NDUsNDUsNzY4MjExMDU1NDg3LDEwLDQ4IDExIDExIDEsMCw0NTsxMSwzMSwyOTkxMDgwMTgzMzUsMTAsLDAsMzE7MCwwLDAsMCwsMCwwOzAsMCwwLDAsLDAsMDswLDAsMCwwLCwwLDA7MCwwLDAsMCwsMCwwOzAsMCwwLDAsLDAsMDswLDAsMCwwLCwwLDA7MCwwLDAsMCwsMCwwOzAsMCwwLDAsLDAsMDswLDAsMCwwLCwwLDA7MCwwLDAsMCwsMCwwOzAsMCwwLDAsLDAsMDt8MTExMTExMTExMTExMDAxMTExMTExMTExMTExMTExMTExMTExMTExMTExMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTExMTExMTExMTExMTExMTExMTExMTEwMDExMTExMTExMDAwMDAwMDAxMTAwMTAxMTExMTExMTExMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTExMTExMTEwMDEwMTAwMDAwMDAwMDAwMDAxMDEwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDExMTExMDExMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTExMTExMTAwMDAxMTExMTExMDAwMDAxMTExMTEwMDAwMDAxMTExMTEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTExMTEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTExMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMHwxMTExMTExMTAwMDAwMDAwMTExMTExMTAwMDAwMDExMTExMTExMTAxMTExMTExMTExMTExMTAwMDAwMDAwMDAwMDAwMTEwMDExMTExMDAwMDAwMDAwMDAwMDAwMDAxMTEwMDAwMTAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTAwMDAwMDAwMDExMTAwMDExMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDExMTAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTExMTExMTExMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwfDExLDI1OTIwMDAsMjU4MTczNywxO3w%3D%21END%21
<button onclick="db();console.log(document.getElementById('red-chk').value)">
beat
</button>
<p></p>
  <input type="checkbox" id="red-chk" name="krass" value="red-chk-success">
  <label for="red-chk">Red Layer</label><br><br>
  <input type="checkbox" id="green-chk" name="krass" value="green-chk-success">
  <label for="green-chk">Green Layer</label><br><br>
  <input type="checkbox" id="blue-chk" name="krass" value="blue-chk-success">
  <label for="blue-chk">Blue Layer</label><br><br>
<canvas id="canvas"></canvas>
</body>
<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
ctx.canvas.width  = window.innerWidth;
 ctx.canvas.height = window.innerHeight;
var size = 66;
const colormatis = [{r:0,g:0,b:0}];
var outputColors = [];//for transposecolor
function rth(r, g, b) {
  return "#" + (1 << 24 | r << 16 | g << 8 | b).toString(16).slice(1);
}
function htr(hex) {
  var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result ? {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16)
  } : null;
}
function TransposeColor(iteration) {
    let rojo = 127;
  let gra = 127;
  let bleaux = 127;
  for (var i=0;i<size-1;i++) {
        if(iteration!=size) {
        outputColors[i] = colormatis[i+size-1];
        //rojo = htr(outputColors[i]).r;
        //gra  = htr(outputColors[i]).g;
        //bleaux = htr(outputColors[i]).b;
        rojo = 0+outputColors[iteration].r/*divided by 2*/ + outputColors[i+0/*size*/].r/*divided by 2*/;
        gra = 0+outputColors[iteration].g/*divided by 2*/ + outputColors[i+0/*size*/].g/*divided by 2*/;
        bleaux = 0+outputColors[iteration].b/*divided by 2*/+ outputColors[i+0/*size*/].b/*divided by 2*/;
        if (!document.querySelector("#red-chk").checked) {
            rojo = 0;
        }
        if (!document.querySelector("#green-chk").checked) {
            gra  = 0;
        }
        if (!document.querySelector("#blue-chk").checked) {
            bleaux = 0;
        }
    }
  outputColors[i] = {r: rojo%255,g: gra%255,b: bleaux%255};
  }
  
}
function getRandomColor() {
  let color = {r:0,g:0,b:0};
  color.r += Math.floor(Math.random() * 256);
  color.g += Math.floor(Math.random() * 256);
  color.b += Math.floor(Math.random() * 256);
  return color;
}
for (var i=0; i<size*2; i++) {
	colormatis[i] = getRandomColor();
}
function db() {
	colormatis[size+size-1] = getRandomColor();
	colormatis.shift();
    console.log(colormatis);
  for (var i=0; i<size; i++) {
  	ctx.fillStyle = rth(colormatis[i%size].r,colormatis[i%size].g,colormatis[i%size].b);
		ctx.fillRect(0,i*5,5,5);
    for (var j=size; j<size+size-1; j++) {
    	TransposeColor(i);
  		ctx.fillStyle = rth(outputColors[j-size].r,outputColors[j-size].g,outputColors[j-size].b);
			ctx.fillRect(5+(j*5)-(size*5),i*5,5,5);
 	 	}
  }
}

//setInterval(db, 500);
</script>